<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸµ ëŒ€ê±´ê³  ìŒì•… ì‹ ì²­</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding: 20px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            padding: 30px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #555;
            font-size: 1.1rem;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.2);
        }

        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .request-list {
            margin-top: 30px;
        }

        .request-item {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .request-item:hover {
            background: #e3f2fd;
            transform: translateX(5px);
        }

        .request-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .song-title {
            font-weight: bold;
            color: #667eea;
            font-size: 1.1rem;
        }

        .timestamp {
            font-size: 0.9rem;
            color: #666;
        }

        .song-artist {
            color: #555;
            margin-bottom: 5px;
        }

        .requester {
            font-size: 0.9rem;
            color: #888;
        }

        .message {
            background: #e8f5e8;
            border: 1px solid #4caf50;
            color: #2e7d32;
            padding: 10px;
            border-radius: 5px;
            margin-top: 15px;
            text-align: center;
        }

        .tab-container {
            display: flex;
            margin-bottom: 20px;
        }

        .tab {
            flex: 1;
            padding: 12px;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .tab:first-child {
            border-radius: 8px 0 0 8px;
        }

        .tab:last-child {
            border-radius: 0 8px 8px 0;
        }

        .tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-item {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            color: white;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            display: block;
        }

        .delete-btn {
            background: #ff4757;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            margin-left: 10px;
        }

        .delete-btn:hover {
            background: #ff3742;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸµ ëŒ€ê±´ê³  ìŒì•… ì‹ ì²­</h1>
            <p>ì—¬ê°€ì‹œê°„ì— ë“£ê³  ì‹¶ì€ ë…¸ë˜ë¥¼ ì‹ ì²­í•´ë³´ì„¸ìš”!</p>
            
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-number" id="totalRequests">0</span>
                    <span>ì´ ì‹ ì²­ê³¡</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="todayRequests">0</span>
                    <span>ì˜¤ëŠ˜ ì‹ ì²­</span>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="tab-container">
                <button class="tab active" onclick="switchTab('request')">ë…¸ë˜ ì‹ ì²­í•˜ê¸°</button>
                <button class="tab" onclick="switchTab('list')">ì‹ ì²­ ëª©ë¡</button>
            </div>

            <div id="requestTab" class="tab-content active">
                <form id="musicRequestForm">
                    <div class="form-group">
                        <label for="songTitle">ğŸµ ë…¸ë˜ ì œëª© *</label>
                        <input type="text" id="songTitle" name="songTitle" required placeholder="ì˜ˆ: Dynamite">
                    </div>

                    <div class="form-group">
                        <label for="artist">ğŸ¤ ê°€ìˆ˜/ì•„í‹°ìŠ¤íŠ¸ *</label>
                        <input type="text" id="artist" name="artist" required placeholder="ì˜ˆ: BTS">
                    </div>

                    <div class="form-group">
                        <label for="grade">ğŸ’ í•™ë…„ *</label>
                        <select id="grade" name="grade" required>
                            <option value="">í•™ë…„ì„ ì„ íƒí•˜ì„¸ìš”</option>
                            <option value="1í•™ë…„">1í•™ë…„</option>
                            <option value="2í•™ë…„">2í•™ë…„</option>
                            <option value="3í•™ë…„">3í•™ë…„</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="className">ğŸ« ë°˜ *</label>
                        <select id="className" name="className" required>
                            <option value="">ë°˜ì„ ì„ íƒí•˜ì„¸ìš”</option>
                            <option value="1ë°˜">1ë°˜</option>
                            <option value="2ë°˜">2ë°˜</option>
                            <option value="3ë°˜">3ë°˜</option>
                            <option value="4ë°˜">4ë°˜</option>
                            <option value="5ë°˜">5ë°˜</option>
                            <option value="6ë°˜">6ë°˜</option>
                            <option value="7ë°˜">7ë°˜</option>
                            <option value="8ë°˜">8ë°˜</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="studentName">ğŸ‘¤ ì´ë¦„ (ì„ íƒì‚¬í•­)</label>
                        <input type="text" id="studentName" name="studentName" placeholder="ìµëª…ìœ¼ë¡œ ì‹ ì²­í•˜ë ¤ë©´ ë¹„ì›Œë‘ì„¸ìš”">
                    </div>

                    <div class="form-group">
                        <label for="genre">ğŸ¼ ì¥ë¥´</label>
                        <select id="genre" name="genre">
                            <option value="">ì¥ë¥´ ì„ íƒ (ì„ íƒì‚¬í•­)</option>
                            <option value="K-POP">K-POP</option>
                            <option value="POP">POP</option>
                            <option value="ë°œë¼ë“œ">ë°œë¼ë“œ</option>
                            <option value="í™í•©">í™í•©</option>
                            <option value="ë¡">ë¡</option>
                            <option value="ì¸ë””">ì¸ë””</option>
                            <option value="OST">OST</option>
                            <option value="ê¸°íƒ€">ê¸°íƒ€</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="message">ğŸ’¬ ì‹ ì²­ ë©”ì‹œì§€ (ì„ íƒì‚¬í•­)</label>
                        <textarea id="message" name="message" rows="3" placeholder="ì´ ë…¸ë˜ë¥¼ ì‹ ì²­í•˜ëŠ” ì´ìœ ë‚˜ í•˜ê³  ì‹¶ì€ ë§ì„ ì ì–´ë³´ì„¸ìš”!"></textarea>
                    </div>

                    <button type="submit" class="submit-btn">ğŸµ ë…¸ë˜ ì‹ ì²­í•˜ê¸°</button>
                </form>

                <div id="successMessage" class="message" style="display: none;">
                    âœ… ë…¸ë˜ ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ê³§ ì—¬ëŸ¬ë¶„ì˜ ì‹ ì²­ê³¡ì„ ë“¤ë ¤ë“œë¦´ê²Œìš” ğŸµ
                </div>
            </div>

            <div id="listTab" class="tab-content">
                <div class="request-list">
                    <h3 style="margin-bottom: 15px; color: #667eea;">ğŸ“‹ ìµœê·¼ ì‹ ì²­ëœ ë…¸ë˜ë“¤</h3>
                    <div id="requestsList">
                        <!-- ì‹ ì²­ëœ ë…¸ë˜ë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let musicRequests = JSON.parse(localStorage.getItem('musicRequests')) || [];

        function switchTab(tabName) {
            // íƒ­ ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ë³€ê²½
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            // íƒ­ ë‚´ìš© í‘œì‹œ/ìˆ¨ê¹€
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            if (tabName === 'request') {
                document.getElementById('requestTab').classList.add('active');
            } else if (tabName === 'list') {
                document.getElementById('listTab').classList.add('active');
                displayRequests();
            }
        }

        function updateStats() {
            const today = new Date().toDateString();
            const todayRequests = musicRequests.filter(req => 
                new Date(req.timestamp).toDateString() === today
            ).length;

            document.getElementById('totalRequests').textContent = musicRequests.length;
            document.getElementById('todayRequests').textContent = todayRequests;
        }

        function displayRequests() {
            const requestsList = document.getElementById('requestsList');
            
            if (musicRequests.length === 0) {
                requestsList.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <h3>ğŸµ</h3>
                        <p>ì•„ì§ ì‹ ì²­ëœ ë…¸ë˜ê°€ ì—†ìŠµë‹ˆë‹¤.<br>ì²« ë²ˆì§¸ ì‹ ì²­ìê°€ ë˜ì–´ë³´ì„¸ìš”!</p>
                    </div>
                `;
                return;
            }

            // ìµœì‹  ìˆœìœ¼ë¡œ ì •ë ¬
            const sortedRequests = [...musicRequests].reverse();
            
            requestsList.innerHTML = sortedRequests.map((request, index) => `
                <div class="request-item">
                    <div class="request-header">
                        <div class="song-title">${request.songTitle}</div>
                        <div class="timestamp">${formatDate(request.timestamp)}
                            <button class="delete-btn" onclick="deleteRequest(${musicRequests.length - 1 - index})">ì‚­ì œ</button>
                        </div>
                    </div>
                    <div class="song-artist">ğŸ¤ ${request.artist}</div>
                    <div class="requester">
                        ğŸ‘¤ ${request.studentName || 'ìµëª…'} (${request.grade} ${request.className})
                        ${request.genre ? `| ğŸ¼ ${request.genre}` : ''}
                    </div>
                    ${request.message ? `<div style="margin-top: 8px; font-style: italic; color: #555;">ğŸ’¬ "${request.message}"</div>` : ''}
                </div>
            `).join('');
        }

        function deleteRequest(index) {
            if (confirm('ì´ ì‹ ì²­ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                musicRequests.splice(index, 1);
                localStorage.setItem('musicRequests', JSON.stringify(musicRequests));
                displayRequests();
                updateStats();
            }
        }

        function formatDate(timestamp) {
            const date = new Date(timestamp);
            const now = new Date();
            const diffInMinutes = Math.floor((now - date) / (1000 * 60));
            
            if (diffInMinutes < 1) {
                return 'ë°©ê¸ˆ ì „';
            } else if (diffInMinutes < 60) {
                return `${diffInMinutes}ë¶„ ì „`;
            } else if (diffInMinutes < 1440) {
                return `${Math.floor(diffInMinutes / 60)}ì‹œê°„ ì „`;
            } else {
                return date.toLocaleDateString('ko-KR', {
                    month: 'short',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            }
        }

        // í¼ ì œì¶œ ì²˜ë¦¬
        document.getElementById('musicRequestForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const request = {
                songTitle: formData.get('songTitle'),
                artist: formData.get('artist'),
                grade: formData.get('grade'),
                className: formData.get('className'),
                studentName: formData.get('studentName'),
                genre: formData.get('genre'),
                message: formData.get('message'),
                timestamp: new Date().toISOString()
            };
            
            musicRequests.push(request);
            localStorage.setItem('musicRequests', JSON.stringify(musicRequests));
            
            // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
            document.getElementById('successMessage').style.display = 'block';
            
            // í¼ ë¦¬ì…‹
            this.reset();
            
            // í†µê³„ ì—…ë°ì´íŠ¸
            updateStats();
            
            // 3ì´ˆ í›„ ì„±ê³µ ë©”ì‹œì§€ ìˆ¨ê¹€
            setTimeout(() => {
                document.getElementById('successMessage').style.display = 'none';
            }, 3000);
        });

        // í˜ì´ì§€ ë¡œë“œì‹œ í†µê³„ ì—…ë°ì´íŠ¸
        updateStats();
    </script>
</body>
</html>