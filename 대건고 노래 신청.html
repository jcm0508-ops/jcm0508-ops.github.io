<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎵 대건고 음악 신청</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding: 20px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            padding: 30px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #555;
            font-size: 1.1rem;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.2);
        }

        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .request-list {
            margin-top: 30px;
        }

        .request-item {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .request-item:hover {
            background: #e3f2fd;
            transform: translateX(5px);
        }

        .request-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .song-title {
            font-weight: bold;
            color: #667eea;
            font-size: 1.1rem;
        }

        .timestamp {
            font-size: 0.9rem;
            color: #666;
        }

        .song-artist {
            color: #555;
            margin-bottom: 5px;
        }

        .requester {
            font-size: 0.9rem;
            color: #888;
        }

        .message {
            background: #e8f5e8;
            border: 1px solid #4caf50;
            color: #2e7d32;
            padding: 10px;
            border-radius: 5px;
            margin-top: 15px;
            text-align: center;
        }

        .tab-container {
            display: flex;
            margin-bottom: 20px;
        }

        .tab {
            flex: 1;
            padding: 12px;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .tab:first-child {
            border-radius: 8px 0 0 8px;
        }

        .tab:last-child {
            border-radius: 0 8px 8px 0;
        }

        .tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-item {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            color: white;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            display: block;
        }

        .delete-btn {
            background: #ff4757;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            margin-left: 10px;
        }

        .delete-btn:hover {
            background: #ff3742;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎵 대건고 음악 신청</h1>
            <p>여가시간에 듣고 싶은 노래를 신청해보세요!</p>
            
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-number" id="totalRequests">0</span>
                    <span>총 신청곡</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="todayRequests">0</span>
                    <span>오늘 신청</span>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="tab-container">
                <button class="tab active" onclick="switchTab('request')">노래 신청하기</button>
                <button class="tab" onclick="switchTab('list')">신청 목록</button>
            </div>

            <div id="requestTab" class="tab-content active">
                <form id="musicRequestForm">
                    <div class="form-group">
                        <label for="songTitle">🎵 노래 제목 *</label>
                        <input type="text" id="songTitle" name="songTitle" required placeholder="예: Dynamite">
                    </div>

                    <div class="form-group">
                        <label for="artist">🎤 가수/아티스트 *</label>
                        <input type="text" id="artist" name="artist" required placeholder="예: BTS">
                    </div>

                    <div class="form-group">
                        <label for="grade">🎒 학년 *</label>
                        <select id="grade" name="grade" required>
                            <option value="">학년을 선택하세요</option>
                            <option value="1학년">1학년</option>
                            <option value="2학년">2학년</option>
                            <option value="3학년">3학년</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="className">🏫 반 *</label>
                        <select id="className" name="className" required>
                            <option value="">반을 선택하세요</option>
                            <option value="1반">1반</option>
                            <option value="2반">2반</option>
                            <option value="3반">3반</option>
                            <option value="4반">4반</option>
                            <option value="5반">5반</option>
                            <option value="6반">6반</option>
                            <option value="7반">7반</option>
                            <option value="8반">8반</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="studentName">👤 이름 (선택사항)</label>
                        <input type="text" id="studentName" name="studentName" placeholder="익명으로 신청하려면 비워두세요">
                    </div>

                    <div class="form-group">
                        <label for="genre">🎼 장르</label>
                        <select id="genre" name="genre">
                            <option value="">장르 선택 (선택사항)</option>
                            <option value="K-POP">K-POP</option>
                            <option value="POP">POP</option>
                            <option value="발라드">발라드</option>
                            <option value="힙합">힙합</option>
                            <option value="록">록</option>
                            <option value="인디">인디</option>
                            <option value="OST">OST</option>
                            <option value="기타">기타</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="message">💬 신청 메시지 (선택사항)</label>
                        <textarea id="message" name="message" rows="3" placeholder="이 노래를 신청하는 이유나 하고 싶은 말을 적어보세요!"></textarea>
                    </div>

                    <button type="submit" class="submit-btn">🎵 노래 신청하기</button>
                </form>

                <div id="successMessage" class="message" style="display: none;">
                    ✅ 노래 신청이 완료되었습니다! 곧 여러분의 신청곡을 들려드릴게요 🎵
                </div>
            </div>

            <div id="listTab" class="tab-content">
                <div class="request-list">
                    <h3 style="margin-bottom: 15px; color: #667eea;">📋 최근 신청된 노래들</h3>
                    <div id="requestsList">
                        <!-- 신청된 노래들이 여기에 표시됩니다 -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let musicRequests = JSON.parse(localStorage.getItem('musicRequests')) || [];

        function switchTab(tabName) {
            // 탭 버튼 활성화 상태 변경
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            // 탭 내용 표시/숨김
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            if (tabName === 'request') {
                document.getElementById('requestTab').classList.add('active');
            } else if (tabName === 'list') {
                document.getElementById('listTab').classList.add('active');
                displayRequests();
            }
        }

        function updateStats() {
            const today = new Date().toDateString();
            const todayRequests = musicRequests.filter(req => 
                new Date(req.timestamp).toDateString() === today
            ).length;

            document.getElementById('totalRequests').textContent = musicRequests.length;
            document.getElementById('todayRequests').textContent = todayRequests;
        }

        function displayRequests() {
            const requestsList = document.getElementById('requestsList');
            
            if (musicRequests.length === 0) {
                requestsList.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <h3>🎵</h3>
                        <p>아직 신청된 노래가 없습니다.<br>첫 번째 신청자가 되어보세요!</p>
                    </div>
                `;
                return;
            }

            // 최신 순으로 정렬
            const sortedRequests = [...musicRequests].reverse();
            
            requestsList.innerHTML = sortedRequests.map((request, index) => `
                <div class="request-item">
                    <div class="request-header">
                        <div class="song-title">${request.songTitle}</div>
                        <div class="timestamp">${formatDate(request.timestamp)}
                            <button class="delete-btn" onclick="deleteRequest(${musicRequests.length - 1 - index})">삭제</button>
                        </div>
                    </div>
                    <div class="song-artist">🎤 ${request.artist}</div>
                    <div class="requester">
                        👤 ${request.studentName || '익명'} (${request.grade} ${request.className})
                        ${request.genre ? `| 🎼 ${request.genre}` : ''}
                    </div>
                    ${request.message ? `<div style="margin-top: 8px; font-style: italic; color: #555;">💬 "${request.message}"</div>` : ''}
                </div>
            `).join('');
        }

        function deleteRequest(index) {
            if (confirm('이 신청을 삭제하시겠습니까?')) {
                musicRequests.splice(index, 1);
                localStorage.setItem('musicRequests', JSON.stringify(musicRequests));
                displayRequests();
                updateStats();
            }
        }

        function formatDate(timestamp) {
            const date = new Date(timestamp);
            const now = new Date();
            const diffInMinutes = Math.floor((now - date) / (1000 * 60));
            
            if (diffInMinutes < 1) {
                return '방금 전';
            } else if (diffInMinutes < 60) {
                return `${diffInMinutes}분 전`;
            } else if (diffInMinutes < 1440) {
                return `${Math.floor(diffInMinutes / 60)}시간 전`;
            } else {
                return date.toLocaleDateString('ko-KR', {
                    month: 'short',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            }
        }

        // 폼 제출 처리
        document.getElementById('musicRequestForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const request = {
                songTitle: formData.get('songTitle'),
                artist: formData.get('artist'),
                grade: formData.get('grade'),
                className: formData.get('className'),
                studentName: formData.get('studentName'),
                genre: formData.get('genre'),
                message: formData.get('message'),
                timestamp: new Date().toISOString()
            };
            
            musicRequests.push(request);
            localStorage.setItem('musicRequests', JSON.stringify(musicRequests));
            
            // 성공 메시지 표시
            document.getElementById('successMessage').style.display = 'block';
            
            // 폼 리셋
            this.reset();
            
            // 통계 업데이트
            updateStats();
            
            // 3초 후 성공 메시지 숨김
            setTimeout(() => {
                document.getElementById('successMessage').style.display = 'none';
            }, 3000);
        });

        // 페이지 로드시 통계 업데이트
        updateStats();
    </script>
</body>
</html>